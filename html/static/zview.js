var t,e;t=this,e=function(t){function e(t){return gt.has(t)||gt.set(t,{}),gt.get(t)}function n(t){gt.delete(t)}function s(t,e=document){return e.querySelector(t)}function r(t,e,n,s={}){var r,i;const o=new CustomEvent(e,{detail:n,bubbles:null===(r=s.bubbles)||void 0===r||r,cancelable:null===(i=s.cancelable)||void 0===i||i});return t.dispatchEvent(o)}function i(t,n,s,r){t.addEventListener(n,s,r);const i=e(t);i.listeners||(i.listeners=[]),i.listeners.push({event:n,handler:s})}function o(t,e){return"submit"===e||"click"===e&&t instanceof HTMLAnchorElement}function c(t,e,n){if(void 0===n)return t.getAttribute(e);null!==n&&!1!==n?t.setAttribute(e,!0!==n?n+"":""):t.removeAttribute(e)}function a(t,e){return t.hasAttribute(e)}function u(t,e){const n=[];let s=t;for(;s&&s!==document.documentElement;){const t=c(s,e);null!==t&&n.push(t),s=s.parentElement}return n}function l(t,e){const{url:n,method:s="GET",data:r,headers:i={},timeout:o=3e4,json:c=!1,strictStatusCheck:a=!1,followRedirects:u=!1}=t,l=null!=e?e:new XMLHttpRequest,f=new Promise((t,e)=>{l.open(s,n,!0),Object.entries(i).forEach(([t,e])=>{l.setRequestHeader(t,e)}),l.timeout=o,l.onload=()=>{const r=(t=>{const e={};return t?(t.trim().split(/[\r\n]+/).forEach(t=>{const n=t.split(": "),s=n.shift(),r=n.join(": ");s&&(e[s.toLowerCase()]=r)}),e):e})(l.getAllResponseHeaders()),i=l.responseURL||n,o=t=>{try{return new URL(t,window.location.href).href}catch(e){return t}},c=o(n),f=o(i)!==c,h={status:l.status,statusText:l.statusText,headers:r,body:l.responseText,xhr:l,redirected:f,finalUrl:i};if(u&&f)return e(new yt("Redirecting to "+i,n,s,302)),void(window.location.href=i);if(!a||l.status>=200&&300>l.status){if((r["content-type"]||"").includes("text/html")){const t=new DOMParser;h.body=t.parseFromString(l.responseText,"text/html")}t(h)}else e(new yt("Request failed with status "+l.status,n,s,l.status))},l.onerror=()=>{e(new yt("Network error",n,s))},l.ontimeout=()=>{e(new yt("Request timeout",n,s))};let f=null;if(r)if(r instanceof FormData)f=r;else if(r instanceof URLSearchParams)f=""+r,i["Content-Type"]||l.setRequestHeader("Content-Type","application/x-www-form-urlencoded");else if(c)f=JSON.stringify(r),i["Content-Type"]||l.setRequestHeader("Content-Type","application/json");else{const t=new URLSearchParams;Object.entries(r).forEach(([e,n])=>{null!=n&&t.append(e,n+"")}),f=""+t,i["Content-Type"]||l.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}l.send(f)});return{promise:f,xhr:l}}function f(){return St}function h(t){const e=St;return St=t,e}function d(t){return new Tt(t)}function p(t,e){Ot.set(t,e)}function m(t){return Ot.get(t)}function w(t,e={}){if(null==t?void 0:t.trim())try{const n=t.replace(kt,(t,e,n,s)=>"z"===e||s.slice(0,n).endsWith("$z.")?t:"__$z."+e),s="undefined"!=typeof window&&window.$z||(null===globalThis||void 0===globalThis?void 0:globalThis.$z),r={t:jt.proxy,$z:s,...e,...m(e.element)},i=Object.keys(r),o=i.map(t=>r[t]);return Function(...i,`return (${n})`)(...o)}catch(n){return}}function y(t,e={}){if(null==t?void 0:t.trim())try{const n=t.replace(kt,(t,e,n,s)=>"z"===e||s.slice(0,n).endsWith("$z.")?t:"__$z."+e),s={$z:"undefined"!=typeof window&&window.$z||(null===globalThis||void 0===globalThis?void 0:globalThis.$z),t:jt.proxy,...e,...m(e.element)},r=Object.keys(s),i=r.map(t=>s[t]);return Function(...r,n)(...i)}catch(n){return}}function v(t){if((t=t.trim()).startsWith("{")||t.startsWith("["))try{return JSON.parse(t)}catch(e){throw Error("Failed to parse JSON data: "+e)}return new URLSearchParams(t)}function g(t,e){e instanceof FormData?e.forEach((e,n)=>{t instanceof FormData?t.append(n,e):t.append(n,""+e)}):e instanceof URLSearchParams?e.forEach((e,n)=>{FormData,t.append(n,e)}):Object.entries(e).forEach(([e,n])=>{null!=n&&(FormData,t.append(e,n+""))})}function b(t){Rt.cleanup(t)}function z(t,e){let n=$t.get(t);n||(n=[],$t.set(t,n)),n.push(e)}function x(t){const e=t.match(Ft);if(!e)return null;const n=Number.parseInt(e[1],10);return Number.isNaN(n)||0>=n?null:n}function E(t){return t instanceof HTMLFormElement?"submit":t instanceof HTMLInputElement||t instanceof HTMLSelectElement||t instanceof HTMLTextAreaElement?"change":"click"}function M(t){var e;if(t instanceof Element)return t instanceof HTMLInputElement?"checkbox"===t.type||"radio"===t.type?t.checked:t.value:t instanceof HTMLSelectElement||t instanceof HTMLTextAreaElement?t.value:null!==(e=t.textContent)&&void 0!==e?e:void 0}function S(t,e){return(n,s,r)=>{const i=t(),o=new IntersectionObserver(t=>{const n=t[0];n&&e(n)&&r()},i);o.observe(n),z(n,o)}}function T(t,e,n){return(s,r,i)=>{const o=t(s);if(!o)return;const c=new MutationObserver(t=>{n(s,i,t,c)});c.observe(o,e),z(s,c)}}function A(t){var e;const n=t.getAttribute("z-config"),s=null!==(e=null==n?void 0:n.trim())&&void 0!==e?e:null,r=_t.get(t);if(!s)return r&&!r.raw||_t.set(t,{raw:null,parsed:null}),null;if(r&&r.raw===s)return r.parsed;try{const e=JSON.parse(s),n="object"!=typeof e||null===e||Array.isArray(e)?null:e;return _t.set(t,{raw:s,parsed:n}),n}catch(i){return _t.set(t,{raw:s,parsed:null}),null}}function j(t){const e=A(t);if(!e)return null;const n=e.selector;if("string"!=typeof n)return null;const s=n.trim();return s.length>0?s:null}function O(t){const e=A(t);if(!e)return null;const n=e.format;return"json"===n||"formdata"===n||"urlencoded"===n?n:null}function k(t){const e=A(t);if(!e)return null;const n=e.method;if("string"!=typeof n)return null;const s=n.trim().toUpperCase();return s.length>0?s:null}function L(t){const e=A(t),n=(t=>{if("number"==typeof t)return Number.isFinite(t)&&t>0?Math.floor(t):null;if("string"==typeof t){const e=t.trim();if(""===e)return null;const n=Number.parseInt(e,10);return Number.isNaN(n)||0>=n?null:n}return null})(null==e?void 0:e.interval);return null!==n?n:(t=>{const e=t.getAttribute("z-trigger");if(!e)return null;const n=e.split(",").map(t=>t.trim()).filter(t=>t.length>0);for(const s of n){const t=s.split(/\s+/).filter(t=>t.length>0);for(const e of t){const t=x(e);if(null!==t)return t}}return null})(t)}function N(t){const e=A(t);if(!e)return null;const n=e.timeout;if(null==n)return null;if("number"==typeof n)return Number.isFinite(n)&&n>0?n:null;if("string"==typeof n){const t=n.trim();if(""===t)return null;const e=Number.parseInt(t,10);return Number.isNaN(e)||0>=e?null:e}return null}function R(t){const e=A(t);if(!e)return null;const n=e.headers;if("object"==typeof n&&null!==n&&!Array.isArray(n)){const t={};for(const[e,s]of Object.entries(n))"string"==typeof e&&"string"==typeof s&&(t[e]=s);return Object.keys(t).length>0?t:null}return null}function $(){const t=new Lt;return{prepare(e){const{element:n,method:s}=e,r=R(n);r&&Object.assign(e.requestOptions.headers,r);const i=N(n);if(null!==i&&(e.requestOptions.timeout=i),["POST","PUT","PATCH"].includes(s))if(n.hasAttribute("z-data")){const t=n.getAttribute("z-data");if(t&&""!==t.trim())try{e.data=w(t)}catch(o){e.data=void 0}else e.data=jt.getAll();e.requestOptions.json=!0}else if(n instanceof HTMLFormElement){const s=e.engine.getConfig(),r=O(n)||s.formSerializationFormat||"json",i=t.collect(n,e.event);if(i)if("json"===r){if(i instanceof FormData||i instanceof URLSearchParams){const t={};i.forEach((e,n)=>{t[n]=e}),e.data=t}else e.data=i;e.requestOptions.json=!0}else"formdata"===r?e.data=i:(e.data=i,Object.keys(e.requestOptions.headers).some(t=>"content-type"===t.toLowerCase())||(e.requestOptions.headers["Content-Type"]="application/x-www-form-urlencoded"))}}}}function D(t){return t.replace(It,(t,e)=>e.toUpperCase())}function F(t){return t.replace(qt,"_")}function H(t){const e=D(t);return e.charAt(0).toUpperCase()+e.slice(1)}function P(){return{prepare(t){const e=(t=>{const e=[],n=c(t,"z-json");if(null!==n){const t=n.split(",").map(t=>t.trim()).filter(t=>t.length>0);if(0===t.length)e.push({signal:"json"});else for(const n of t){const[t,s]=n.split(":").map(t=>t.trim());t&&e.push({signal:t,path:s||void 0})}}for(const s of Array.from(t.attributes)){if(!s.name.startsWith(Jt))continue;const t=s.name.slice(Jt.length);if(!t)continue;const n=D(t),r=s.value.trim();e.push({signal:n,path:r||void 0})}return e})(t.element);t.metadata.jsonBindings=e,e.length>0&&(t.expectJson=!0,t.requestOptions.json=!0,Object.keys(t.requestOptions.headers).some(t=>"accept"===t.toLowerCase())||(t.requestOptions.headers.Accept="application/json"))},success(t){var e;const n=null!==(e=t.metadata.jsonBindings)&&void 0!==e?e:[];if(0===n.length)return;const s=(t=>{if("string"!=typeof t)throw Error("Expected JSON response text but received a Document.");if(""===t.trim())return null;try{return JSON.parse(t)}catch(e){throw Error("Failed to parse JSON response: "+e.message)}})(t.response.body);t.response.json=s,((t,e)=>{for(const n of t){const t=W(e,n.path);jt.set(n.signal,t)}})(n,s)}}}function W(t,e){if(!e)return t;const n=e.split(".").map(t=>t.trim()).filter(Boolean);let s=t;for(const r of n){if(null==s)return;if(Array.isArray(s)){const t=+r;if(Number.isNaN(t))return;s=s[t];continue}if("object"!=typeof s)return;s=s[r]}return s}function C(t,e,n){var s,r,i,o,c;const a=(t=>{if("string"==typeof t){const e=document.createElement("template");return e.innerHTML=t.trim(),e.content}return t})(e),u=(c=a)instanceof Element?[c]:c instanceof DocumentFragment?Array.from(c.childNodes).filter(t=>t instanceof Element):[];switch(n){case"replace":return a instanceof DocumentFragment&&a.firstChild?null===(s=t.parentNode)||void 0===s||s.replaceChild(a,t):a instanceof Element&&(null===(r=t.parentNode)||void 0===r||r.replaceChild(a,t)),u;case"inner":return"function"==typeof t.replaceChildren?t.replaceChildren(a):(t.innerHTML="",t.appendChild(a)),[t];case"prepend":return t.insertBefore(a,t.firstChild),[t];case"append":return t.appendChild(a),[t];case"beforebegin":return null===(i=t.parentNode)||void 0===i||i.insertBefore(a,t),u;case"afterend":return null===(o=t.parentNode)||void 0===o||o.insertBefore(a,t.nextSibling),u;case"morph":case"morph-all":return _(t,a),[t];default:return[]}}function _(t,e){var n;e instanceof Element?t.tagName===e.tagName?(((t,e)=>{for(let n=t.attributes.length-1;n>=0;n--){const s=t.attributes[n];e.hasAttribute(s.name)||t.removeAttribute(s.name)}for(let n=0;e.attributes.length>n;n++){const s=e.attributes[n];t.getAttribute(s.name)!==s.value&&t.setAttribute(s.name,s.value)}})(t,e),t.innerHTML=e.innerHTML):null===(n=t.parentNode)||void 0===n||n.replaceChild(e,t):e instanceof DocumentFragment&&e.firstElementChild&&_(t,e.firstElementChild)}function I(){let t=null;return{async afterDispatch(e){!e.expectJson&&e.response&&(t||(t=new Bt(e.engine)),await t.swap(e.element,e.response))}}}function U(t){J(Gt,t)}function q(){const t=t=>{const e=L(t.element);if(null===e)return void J(Gt,t.element);const n=Gt.get(t.element);void 0!==n&&window.clearTimeout(n);const s=window.setTimeout(()=>{Gt.delete(t.element),document.contains(t.element)&&t.manager.executeRequest(t.element,t.url,t.options,t.event).catch(()=>{})},e);Gt.set(t.element,s)};return{success:t,error:t,finalize(t){null===L(t.element)&&J(Gt,t.element)}}}function J(t,e){const n=t.get(e);void 0!==n&&(window.clearTimeout(n),t.delete(e))}function Z(){return{async success(t){const{element:e,url:n}=t;if(!a(e,"z-history"))return;const s=c(e,"z-history"),r=""===s?n:s;if(!r)return;const i=a(e,"z-history-replace")?"replaceState":"pushState";window.history[i]({url:r},"",r)}}}function V(){return{success(t){const{response:e}=t;if(!e)return;const{headers:n}=e,s=n["z-redirect"],i=n["z-location"];return s?(((t,e)=>{const n=B(e);r(t,"z-redirect",{element:t,url:n,type:"header"})&&(window.location.href=n)})(t.element,s),void(t.stopPropagation=!0)):i?(((t,e,n)=>{const s=B(e);r(t,"z-location",{element:t,url:s,type:"header"})&&n.executeRequest(t,s,{method:"GET"}).catch(()=>{})})(t.element,i,t.manager),void(t.stopPropagation=!0)):void 0}}}function B(t){const e=t.trim();return/^https?:\/\//i.test(e)||e.startsWith("/")?e:"/"+e}function G(t){return t.replace(/[\r\n]/g,"")}function K(t){let e;if(t.id)e="#"+G(t.id);else{const n=t.getAttribute("name");if(null==n?void 0:n.trim())e=`[name="${G(n.replace(/["\\]/g,"\\$&"))}"]`;else{const n=t.getAttribute("data-z-id");e=(null==n?void 0:n.trim())?`[data-z-id="${G(n.replace(/["\\]/g,"\\$&"))}"]`:t.tagName.toLowerCase()}}const n={Accept:"text/html+partial","Z-Url":G(location.href),"Z-Origin":e},s=t.getAttribute("z-target");return s&&(n["Z-Target"]=G(s)),n}function X(){return Kt.map(t=>t())}function Q(t){let e=Qt.get(t);return e||(e=new Xt(t),Qt.set(t,e)),e}function Y(t,e=!1){const n=t.split(".");if(!e)return{name:n[0],modifiers:n.slice(1)};let s=-1;for(let r=0;n.length>r;r++)if(te.includes(n[r])){s=r;break}return s>0?{name:n.slice(0,s).join("."),modifiers:n.slice(s)}:{name:t,modifiers:[]}}function tt(t,e){switch(e){case"camel":return D(t);case"pascal":return H(t);case"snake":return F(t);default:return t}}function et(t,e,n){const s=(t=>t.filter(t=>te.includes(t)))(e);return s.length>0?tt(t,s[s.length-1]):n?tt(t,n):t}function nt(t){return new ne(t)}function st(){const t=new WeakMap,e=e=>{const n=t.get(e);n&&((t=>{for(const n of t)try{n.dispose()}catch(e){}})(n),t.delete(e))};return{run(n,s){e(n);const r=(i=s())?Array.isArray(i)?i:[i]:[];var i;return!!r.length&&(t.set(n,r),!0)},cleanup:e}}function rt(t,e){const n=Array.from(t.attributes),s=e+"-",r=[];let i=null;const o=[];for(const c of n)if(c.name!==e){if(c.name.startsWith(e+".")){const t=c.name.slice(e.length+1);if(!t.includes("-")){i=c.value,o.push(...t.split("."));continue}}if(c.name.startsWith(s)){const t=c.name.slice(s.length),e=t.indexOf(".");if(e>0){const n=t.slice(0,e),s=t.slice(e+1).split(".");r.push({name:n,value:c.value,modifiers:s})}else r.push({name:t,value:c.value,modifiers:[]})}}else i=c.value;return{baseValue:i,entries:r,modifiers:o}}function it(t,e,n){const s=rt(t,e),r=s.entries.map(t=>({name:n(t.name),value:t.value,modifiers:t.modifiers}));return{baseValue:s.baseValue,entries:r,modifiers:s.modifiers}}function ot(t){if(!t)return"";const e=t.trim();return e?e.startsWith("--")?e:(e.includes("-")?e.toLowerCase():e).replace(/-([a-z0-9])/gi,(t,e)=>e.toUpperCase()):""}function ct(t){return null!=t&&!1!==t&&("string"!=typeof t||""!==t)}function at(){return ve}function ut(t){return t?t.replace(xe,"").replace(Ee,"").replace(Me,"#").trim():""}function lt(t,e=$e){for(const n of e)t.register(new n)}function ft(t,e={}){var n;const s=new zt(t);return lt(s,null!==(n=e.directives)&&void 0!==n?n:$e),s}const ht={historyLimit:20,timeout:3e4,debug:!1,strictStatusCheck:!1,formSerializationFormat:"json",followRedirects:!1};class dt{constructor(t){this.config={...ht};const e=this.loadFromScript();Object.assign(this.config,e,t)}get(){return{...this.config}}update(t){Object.assign(this.config,t)}loadFromScript(){const t=document.querySelectorAll("script[data-config]");if(0===t.length)return{};const e=t[t.length-1].getAttribute("data-config");if(!e)return{};try{return JSON.parse(e)}catch(n){return{}}}}class pt{constructor(){this.directives=new Map,this.cachedDirectives=null}register(t){this.directives.has(t.name),this.directives.set(t.name,t),this.cachedDirectives=null}get(t){return this.directives.get(t)}getAll(){return this.cachedDirectives||(this.cachedDirectives=Array.from(this.directives.values()).sort((t,e)=>e.priority-t.priority)),this.cachedDirectives.slice()}has(t){return this.directives.has(t)}}class mt{constructor(){this.commands=new Map}register(t,e){this.commands.has(t),this.commands.set(t,e)}registerMultiple(t){Object.entries(t).forEach(([t,e])=>{this.register(t,e)})}get(t){return this.commands.get(t)}has(t){return this.commands.has(t)}getAll(){const t={};return this.commands.forEach((e,n)=>{t[n]=e}),t}}class wt extends Error{constructor(t,e){super(t),this.name="ZviewError",this.context=e}}class yt extends wt{constructor(t,e,n,s,r){super(`[${n} ${e}] ${t}`,r),this.name="RequestError",this.url=e,this.method=n,this.status=s}}class vt{constructor(t,e=!1){this.onError=t,this.debug=e}handle(t,e){if(this.onError)try{this.onError(t,e)}catch(n){}}wrap(t){return(...e)=>{try{return t(...e)}catch(n){throw this.handle(n,{args:e}),n}}}wrapAsync(t){return async(...e)=>{try{return await t(...e)}catch(n){throw this.handle(n,{args:e}),n}}}}const gt=new WeakMap;let bt=0;class zt{constructor(t){this.initialized=!1,this.configManager=new dt(t),this.directiveRegistry=new pt,this.commandRegistry=new mt;const e=this.configManager.get();this.errorHandler=new vt(e.onError,e.debug)}init(){this.initialized?this.configManager.get():(this.initialized=!0,"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>this.onReady()):this.onReady())}onReady(){this.configManager.get(),this.activate(document.body),r(document.body,"z-ready")}activate(t){try{const e=this.directiveRegistry.getAll();if(this.configManager.get(),0===e.length)return;this.activateDirectivesOnElement(t,e),t.querySelectorAll("*").forEach(t=>{this.activateDirectivesOnElement(t,e)})}catch(e){this.errorHandler.handle(e,{element:t})}}activateDirectivesOnElement(t,n){const s=e(t);s.activeDirectives||(s.activeDirectives=new Set);for(const e of n)try{if(s.activeDirectives.has(e.name))continue;if(s.ignored&&"z-ignore"!==e.name)continue;e.activate(t,this)}catch(r){this.errorHandler.handle(r,{directive:e.name,element:t})}}deactivate(t){try{const r=e(t);if(r.activeDirectives)for(const e of r.activeDirectives){const n=this.directiveRegistry.get(e);if(null==n?void 0:n.deactivate)try{n.deactivate(t)}catch(s){this.errorHandler.handle(s,{directive:e,element:t})}}r.listeners&&r.listeners.forEach(({event:e,handler:n})=>{t.removeEventListener(e,n)}),n(t),t.querySelectorAll("*").forEach(t=>this.deactivate(t))}catch(s){this.errorHandler.handle(s,{element:t})}}register(t){this.directiveRegistry.register(t)}registerCommands(t){this.commandRegistry.registerMultiple(t)}getConfig(){return this.configManager.get()}getDirectiveRegistry(){return this.directiveRegistry}getCommandRegistry(){return this.commandRegistry}getErrorHandler(){return this.errorHandler}}class xt{markActivated(t){const n=e(t);n.activeDirectives||(n.activeDirectives=new Set),n.activeDirectives.add(this.name)}createContext(t,e){return{element:t,engine:e,config:e.getConfig()}}shouldActivate(t,n){var s;return!!t.hasAttribute(n)&&!(null===(s=e(t).activeDirectives)||void 0===s?void 0:s.has(this.name))}}class Et{static enqueue(t){this.queue.add(t),this.pending||(this.pending=!0,queueMicrotask(()=>this.flush()))}static flush(){if(0===this.queue.size)return void(this.pending=!1);const t=Array.from(this.queue);this.queue.clear(),this.pending=!1,t.sort((t,e)=>e.priority-t.priority);for(const e of t)e.run()}static flushSync(){if(0===this.queue.size)return;const t=Array.from(this.queue);this.queue.clear(),this.pending=!1,t.sort((t,e)=>e.priority-t.priority);for(const e of t)e.run()}}Et.queue=new Set,Et.pending=!1;class Mt{constructor(){this.subscribers=new Set,this.syncSubscribers=new Set}subscribe(t){this.subscribers.add(t)}unsubscribe(t){this.subscribers.delete(t)}subscribeSync(t){this.syncSubscribers.add(t)}unsubscribeSync(t){this.syncSubscribers.delete(t)}notify(){for(const t of this.syncSubscribers)t.markDirty();for(const t of this.subscribers)Et.enqueue(t)}}let St=null;class Tt extends Mt{constructor(t){super(),this.dependencies=new Set,this.dirty=!0,this.isUpdating=!1,this.compute=t,this.update()}addDependency(t){this.dependencies.add(t)}updateSubscriptions(t){for(const e of this.dependencies)t.has(e)||(e.unsubscribeSync(this),this.dependencies.delete(e));for(const e of t)this.dependencies.has(e)||(e.subscribeSync(this),this.dependencies.add(e))}markDirty(){this.dirty||this.isUpdating||(this.dirty=!0,this.notify())}update(){if(!this.isUpdating){this.isUpdating=!0;try{const t=new Set,e=h({addDependency(e){t.add(e)}});try{const t=this.compute();this.cachedValue=t}finally{h(e)}this.updateSubscriptions(t),this.dirty=!1,this.notify()}catch(t){}finally{this.isUpdating=!1}}}get value(){this.dirty&&this.update();const t=f();return t&&t.addDependency(this),this.cachedValue}peek(){return this.dirty&&this.update(),this.cachedValue}}const At=Symbol(),jt=new class{constructor(){this.root={},this.signalMap=new WeakMap,this.proxyCache=new WeakMap,this.reverseProxyCache=new WeakMap,this.computedSignals=new Map,this.proxy=this.createReactive(this.root)}getSignal(t,e){let n=this.signalMap.get(t);n||(n=new Map,this.signalMap.set(t,n));let s=n.get(e);return s||(s=new Mt,n.set(e,s)),s}shouldProxy(t){if(null===t||"object"!=typeof t)return!1;if(t instanceof Node)return!1;if(t instanceof Event)return!1;if(t instanceof Date)return!1;if(t instanceof RegExp)return!1;if(t instanceof Map)return!1;if(t instanceof Set)return!1;if(t instanceof WeakMap)return!1;if(t instanceof WeakSet)return!1;if(ArrayBuffer.isView(t))return!1;const e=Object.getPrototypeOf(t);return e===Object.prototype||e===Array.prototype||null===e}createReactive(t){if(this.reverseProxyCache.has(t))return t;const e=this.proxyCache.get(t);if(e)return e;const n=new Proxy(t,{get:(t,e)=>{if(t===this.root&&"string"==typeof e){const t=this.computedSignals.get(e);if(t){const e=f();return e&&e.addDependency(t),t.value}}const n=f();n&&n.addDependency(this.getSignal(t,e));const s=Reflect.get(t,e);if(this.shouldProxy(s)){const t=this.createReactive(s),e=f();if(e){let t=s;for(;this.reverseProxyCache.has(t);)t=this.reverseProxyCache.get(t);Array.isArray(t)&&e.addDependency(this.getSignal(t,At))}return t}return s},set:(t,e,n)=>{const s=Reflect.get(t,e);if(!Object.is(s,n)&&(this.shouldProxy(n)&&(n=this.createReactive(n)),Reflect.set(t,e,n),this.getSignal(t,e).notify(),Array.isArray(t))){let e=t;for(;this.reverseProxyCache.has(e);)e=this.reverseProxyCache.get(e);this.getSignal(e,At).notify()}return!0},deleteProperty:(t,e)=>{const n=Reflect.has(t,e),s=Reflect.deleteProperty(t,e);if(s&&n&&(this.getSignal(t,e).notify(),Array.isArray(t))){let e=t;for(;this.reverseProxyCache.has(e);)e=this.reverseProxyCache.get(e);this.getSignal(e,At).notify()}return s}});return this.proxyCache.set(t,n),this.reverseProxyCache.set(n,t),n}resolvePath(t,e){const n=e.split(".");let s=t;for(const r of n){if(null==s)return;if("object"!=typeof s)return;s=s[r]}return s}get(t){if(!t.includes(".")){const e=this.computedSignals.get(t);return e?e.value:this.proxy[t]}return this.resolvePath(this.proxy,t)}set(t,e){if(!t.includes("."))return void(this.proxy[t]=e);const n=t.split(".");let s=this.proxy;for(let r=0;n.length-1>r;r++){const t=n[r];if("object"!=typeof s||null===s)return;const e=s;t in e&&"object"==typeof e[t]&&null!==e[t]||(e[t]={}),s=e[t]}"object"==typeof s&&null!==s&&(s[n[n.length-1]]=e)}patch(t){this.deepMerge(this.proxy,t)}deepMerge(t,e){for(const[n,s]of Object.entries(e))null===s?delete t[n]:"object"!=typeof s||Array.isArray(s)?t[n]=s:(("object"!=typeof t[n]||null===t[n]||Array.isArray(t[n]))&&(t[n]={}),this.deepMerge(t[n],s))}has(t){if(!t.includes("."))return t in this.proxy;const e=t.split(".");let n=this.proxy;for(const s of e){if("object"!=typeof n||null===n)return!1;if(!(s in n))return!1;n=n[s]}return!0}delete(t){if(!t.includes("."))return void delete this.proxy[t];const e=t.split(".");let n=this.proxy;for(let s=0;e.length-1>s;s++){if("object"!=typeof n||null===n)return;n=n[e[s]]}"object"==typeof n&&null!==n&&delete n[e[e.length-1]]}getAll(){const t=(e,n=new WeakSet)=>{if(null===e||"object"!=typeof e)return e;if(n.has(e))return;if(n.add(e),e instanceof Node||e===window||e===globalThis)return;if(Array.isArray(e))return e.map(e=>t(e,n));const s={};for(const r in e)({}).hasOwnProperty.call(e,r)&&(s[r]=t(e[r],n));return s};return t(this.root)}createComputed(t,e){const n=this.computedSignals.get(t);if(n)return n;const s=d(e);return this.computedSignals.set(t,s),s}},Ot=new WeakMap,kt=/\$([a-zA-Z_]\w*)/g;class Lt{collect(t,e){var n;const s=this.findForm(t);let r=null;if(s){const t=this.getSubmitter(e);let i=null,c=!1;if(t)try{i=new FormData(s,t),c=!0}catch(o){i=new FormData(s)}else i=new FormData(s);if(i||(i=new FormData(s)),!c&&t&&this.shouldAppendSubmitter(t)){const e=t.getAttribute("name");if(e){const s=null!==(n=t.getAttribute("value"))&&void 0!==n?n:"";i.append(e,s)}}r=i}const i=u(t,"z-data");return i.length>0&&(r||(r=new URLSearchParams),i.reverse().forEach(t=>{try{const e=v(t);g(r,e)}catch(e){}})),r}findForm(t){if(t instanceof HTMLFormElement)return t;if(t instanceof HTMLInputElement&&t.form)return t.form;const e=t.closest("form");return e instanceof HTMLFormElement?e:null}getSubmitter(t){if(!t)return null;if("undefined"!=typeof SubmitEvent&&t instanceof SubmitEvent&&t.submitter)return t.submitter instanceof HTMLElement?t.submitter:null;if(t.currentTarget instanceof HTMLElement&&this.isSubmitCandidate(t.currentTarget))return t.currentTarget;if(t.target instanceof HTMLElement){const e=t.target.closest('button, input[type="submit"], input[type="image"]');return e instanceof HTMLElement?e:null}return null}isSubmitCandidate(t){return t instanceof HTMLButtonElement?"submit"===t.type:t instanceof HTMLInputElement&&("submit"===t.type||"image"===t.type)}shouldAppendSubmitter(t){return!!t.hasAttribute("name")&&this.isSubmitCandidate(t)}}class Nt{constructor(){this.debouncers=new WeakMap,this.throttlers=new WeakMap}static parseDelayModifiers(t){const e={};for(let n=0;t.length>n;n++){const s=t[n];if(s.startsWith("delay")){const s=this.extractDelayValue(t,n);s>0&&(e.delay=s)}else if(s.startsWith("debounce")){const s=this.extractDelayValue(t,n);s>0&&(e.debounce={delay:s,leading:t.includes("leading"),trailing:!t.includes("notrail")})}else if(s.startsWith("throttle")){const s=this.extractDelayValue(t,n);s>0&&(e.throttle={delay:s,leading:!t.includes("noleading"),trailing:t.includes("trail")})}}return e}static extractDelayValue(t,e){const n=t[e].match(Nt.DELAY_VALUE_PATTERN);if(n)return parseInt(n[1],10);if(t.length-1>e){const n=parseInt(t[e+1],10);return isNaN(n)?0:n}return 0}async executeWithDelay(t,e){if(e.debounce){const n=this.debounceCall(t.element,t.statement,e.debounce);return n.wait?{executeNow:!1,wait:(async()=>{const e=await n.wait;return e&&await t.execute(),e||!1})()}:n}if(e.throttle){const n=this.throttleCall(t.element,t.statement,e.throttle);return n.wait?{executeNow:!1,wait:(async()=>{const e=await n.wait;return e&&await t.execute(),e||!1})()}:n}return e.delay&&e.delay>0?{executeNow:!1,wait:(async()=>(await new Promise(t=>setTimeout(t,e.delay)),t&&"function"==typeof t.execute&&await t.execute(),!0))()}:{executeNow:!0}}debounceCall(t,e,n){const{delay:s,leading:r=!1,trailing:i=!0}=n;this.debouncers.has(t)||this.debouncers.set(t,new Map);const o=this.debouncers.get(t);o.has(e)||o.set(e,{timeoutId:0,leadingFired:!1});const c=o.get(e);return c.timeoutId&&clearTimeout(c.timeoutId),r&&!c.leadingFired?(c.leadingFired=!0,c.timeoutId=setTimeout(()=>{c.leadingFired=!1},s),{executeNow:!0}):i?{executeNow:!1,wait:new Promise(t=>{c.timeoutId=setTimeout(()=>{c.leadingFired=!1,t(!0)},s)})}:{executeNow:!1}}throttleCall(t,e,n){const{delay:s,leading:r=!0,trailing:i=!1}=n;this.throttlers.has(t)||this.throttlers.set(t,new Map);const o=this.throttlers.get(t);o.has(e)||o.set(e,{lastExecuted:0,timeoutId:0});const c=o.get(e),a=Date.now(),u=a-c.lastExecuted;if(u>=s)return r?(c.lastExecuted=a,{executeNow:!0}):(c.timeoutId&&clearTimeout(c.timeoutId),{executeNow:!1,wait:new Promise(t=>{c.timeoutId=setTimeout(()=>{c.lastExecuted=Date.now(),c.timeoutId=0,t(!0)},s)})});if(i){c.timeoutId&&clearTimeout(c.timeoutId);const t=s-u;return{executeNow:!1,wait:new Promise(e=>{c.timeoutId=setTimeout(()=>{c.lastExecuted=Date.now(),c.timeoutId=0,e(!0)},t)})}}return{executeNow:!1}}cleanup(t){const e=this.debouncers.get(t);if(e){for(const t of e.values())t.timeoutId&&clearTimeout(t.timeoutId);this.debouncers.delete(t)}const n=this.throttlers.get(t);if(n){for(const t of n.values())t.timeoutId&&clearTimeout(t.timeoutId);this.throttlers.delete(t)}}}Nt.DELAY_VALUE_PATTERN=/^(?:delay|debounce|throttle)\.(\d+)$/;const Rt=new Nt,$t=new WeakMap,Dt="delay.",Ft=/^every\(\s*(\d+)\s*\)$/,Ht={load:(t,e,n)=>((t,e)=>{let n=!1;const s=()=>{n||(n=!0,e())};"complete"!==document.readyState?window.addEventListener("load",()=>s(),{once:!0}):Promise.resolve().then(()=>s())})(0,n),scroll(t,e,n){window.addEventListener("scroll",()=>n())},windowScroll(t,e,n){t.addEventListener("scroll",()=>n())},outside(t,e,n){document.addEventListener("click",e=>{t.contains(e.target)||n()})}},Pt=.01,Wt=()=>window.innerHeight/2+"px";Ht.visible=S(()=>({threshold:Pt}),t=>t.intersectionRatio>=Pt),Ht.invisible=S(()=>{},t=>0===t.intersectionRatio),Ht.closeby=S(()=>({rootMargin:Wt()}),t=>t.intersectionRatio>=Pt),Ht.away=S(()=>({rootMargin:Wt()}),t=>0===t.intersectionRatio);const Ct={childList:!0};Ht.remove=T(t=>t.parentNode,Ct,(t,e,n,s)=>{for(const r of n)for(const n of Array.from(r.removedNodes))if(n===t||n instanceof Element&&n.contains(t))return e(),void s.disconnect()}),Ht.childrenChange=T(t=>t,Ct,(t,e)=>e()),Ht.empty=T(t=>t,Ct,(t,e)=>{0===t.children.length&&e()}),Ht.notempty=T(t=>t,Ct,(t,e)=>{t.children.length>0&&e()});const _t=new WeakMap,It=/-([a-z])/g,Ut=/[A-Z]/g,qt=/-/g,Jt="z-json-";class Zt{findTarget(t,e){var n;const s=null===(n=null!=e?e:c(t,"z-target"))||void 0===n?void 0:n.trim();if(!s||"this"===s||"target"===s)return t;if(!s.includes("|"))return this.findSingleTarget(t,s,!1);const r=s.split("|").map(t=>t.trim()).filter(Boolean);if(!r.length)return t;let i=t;for(let o=0;r.length>o;o++){if(!i)return null;i=this.findSingleTarget(i,r[o],o>0)}return i}findSingleTarget(t,e,n){var r;const i=e.trim();if(!i||"this"===i||"target"===i)return t;if("inherit"===i){const e=null===(r=t.parentElement)||void 0===r?void 0:r.closest("[z-target]");return e?this.findTarget(e):null}if("parent"===i)return t.parentElement;if(i.startsWith("parent ")){const e=t.parentElement;if(!e)return null;const n=i.substring(7).trim();return n?e.closest(n)||s(n,e):e}if(i.startsWith("child ")){const e=i.substring(6).trim();return e?s(e,t):null}if(i.startsWith("sibling ")){const e=t.parentElement;if(!e)return null;const n=i.substring(8).trim();return n?s(n,e):null}return s(i,n?t:document)}findReply(t,e){if("string"==typeof t){const e=document.createElement("template");return e.innerHTML=t.trim(),e.content}if(!e){const e=document.createDocumentFragment();return Array.from(t.body.childNodes).forEach(t=>{e.appendChild(t.cloneNode(!0))}),e}return s(e,t)}}class Vt{process(t){this.findScripts(t).forEach(t=>{this.shouldExecute(t)&&this.executeScript(t)})}findScripts(t){if(t instanceof DocumentFragment){const e=[];return t.querySelectorAll("script").forEach(t=>{t instanceof HTMLScriptElement&&e.push(t)}),e}return Array.from(t.querySelectorAll("script"))}shouldExecute(t){if(t.hasAttribute("data-z-noload"))return!1;const e=t.type;return!e||"text/javascript"===e||"module"===e}executeScript(t){var e;const n=document.createElement("script");Array.from(t.attributes).forEach(t=>{n.setAttribute(t.name,t.value)}),t.src?n.src=t.src:n.textContent=t.textContent,null===(e=t.parentNode)||void 0===e||e.replaceChild(n,t)}}class Bt{constructor(t){this.engine=t,this.targetFinder=new Zt,this.scriptProcessor=new Vt}async swap(t,e,n){const s=n||this.getSwapStrategy(t),i=this.targetFinder.findTarget(t);if(!i)return;const o=j(t),c=this.targetFinder.findReply(e.body,o||void 0);if(!c)return;if(!r(i,"z-swap-before",{element:t,target:i,content:c,strategy:s}))return;const a=C(i,c,s),u=a.length>0?a:[i];if(a.length>0)for(const r of a)this.scriptProcessor.process(r),this.engine.activate(r),this.autoFocus(r);u.forEach(e=>{r(e,"z-swap-after",{element:t,target:e,content:c,strategy:s})})}getSwapStrategy(t){return c(t,"z-swap")||"inner"}autoFocus(t){const e=t.querySelector("[autofocus]");e instanceof HTMLElement&&setTimeout(()=>{e.focus()},0)}}const Gt=new WeakMap,Kt=[$,P,Z,V,I,q];class Xt{constructor(t,e={}){var n;this.engine=t,this.features=null!==(n=e.features)&&void 0!==n?n:X()}async executeRequest(t,e,n={},s){var i,o;const a=n.method||"GET",u=this.engine.getConfig(),f={...K(t),...null!==(i=n.headers)&&void 0!==i?i:{}},h={...n,url:e,method:a,data:void 0,timeout:u.timeout,json:!1,headers:f};u.strictStatusCheck&&(h.strictStatusCheck=!0),u.followRedirects&&(h.followRedirects=!0);const d=new XMLHttpRequest,p={element:t,url:e,method:a,options:n,requestOptions:h,data:n.data,event:s,xhr:d,expectJson:!1,manager:this,engine:this.engine,metadata:{}};for(const r of this.features)r.prepare&&await r.prepare(p);if(h.data=p.data,c(t,"aria-busy","true"),t.classList.add("z-active"),!r(t,"z-before",{element:t,url:e,method:a,data:p.data,xhr:d}))return c(t,"aria-busy",null),t.classList.remove("z-active"),null;try{const{promise:n}=l(h,d),s=await n;p.response=s;for(const t of this.features){if(p.stopPropagation)break;t.success&&await t.success(p)}r(t,"z-after",{element:t,url:e,method:a,status:s.status,response:null!==(o=s.json)&&void 0!==o?o:s.body,xhr:d,redirected:s.redirected,finalUrl:s.finalUrl});for(const t of this.features){if(p.stopPropagation)break;t.afterDispatch&&await t.afterDispatch(p)}return s}catch(m){p.error=m,r(t,"z-error",{element:t,url:e,method:a,error:m,xhr:d});for(const t of this.features)t.error&&await t.error(p);throw m}finally{c(t,"aria-busy",null),t.classList.remove("z-active"),r(t,"z-finally",{element:t});for(const t of this.features)t.finalize&&await t.finalize(p)}}}const Qt=new WeakMap;class Yt extends xt{constructor(){super(...arguments),this.name="z-req",this.priority=100}activate(t,e){if(!this.shouldActivate(t,this.name))return;const{url:n,method:s}=this.parseReqAttr(t),r=null!=n?n:this.getFallbackUrl(t);if(!r)return;const a=(k(t)||s||this.getDefaultMethod(t)).toUpperCase(),u=Q(e),l=(t=>{const e=c(t,"z-trigger");if(!e)return[{type:E(t)}];const n=e.split(",").map(t=>t.trim()).filter(t=>t.length>0).map(e=>((t,e)=>{const n=e.split(/\s+/).filter(Boolean);if(0===n.length)return null;let s=n.shift();("once"===s||"changed"===s||s.startsWith(Dt)||null!==x(s))&&(n.unshift(s),s=E(t));const r={type:s};return n.forEach(t=>{if("once"===t)return void(r.once=!0);if("changed"===t)return void(r.changed=!0);const e=x(t);if(null===e){if(t.startsWith(Dt)){const e=Number.parseInt(t.slice(6),10);Number.isNaN(e)||0>e||(r.delay=e)}}else r.every=e}),r})(t,e)).filter(t=>null!==t);return 0===n.length&&n.push({type:E(t)}),n})(t);((t,e,n)=>{e.forEach(e=>{var s;const r=((t,e,n)=>{let s=e.changed?M(t):void 0,r=null;return i=>{var o,c;if(e.changed){const e=M(null!==(o=i.target)&&void 0!==o?o:t);if(e===s)return;s=e}null===(c=n.before)||void 0===c||c.call(n,i);const a=()=>n.run(i);e.delay&&e.delay>0?(r&&clearTimeout(r),r=setTimeout(a,e.delay)):a()}})(t,e,n);null===(s=Ht[e.type])||void 0===s||s.call(Ht,t,e,()=>t.dispatchEvent(new Event(e.type))),i(t,e.type,r,e.once?{once:!0}:void 0)})})(t,l,{before(e){o(t,e.type)&&e.preventDefault()},run(e){(async e=>{try{await u.executeRequest(t,r,{method:a},e)}catch(n){}})(e)}}),this.markActivated(t)}deactivate(t){(t=>{b(t),(t=>{const e=$t.get(t);e&&(e.forEach(t=>{t.disconnect()}),$t.delete(t))})(t)})(t),U(t)}getFallbackUrl(t){return t instanceof HTMLAnchorElement?t.href:t instanceof HTMLFormElement?t.action:null}parseReqAttr(t){const e=c(t,this.name);if(!e)return{url:null,method:null};const n=e.trim(),s=/^(GET|POST|PUT|PATCH|DELETE)\s*[:\s]\s*(.+)$/i.exec(n);if(s){const t=s[1].toUpperCase();return{url:s[2].trim(),method:t}}return{url:n,method:null}}getDefaultMethod(t){return t instanceof HTMLFormElement||t.hasAttribute("z-data")?"POST":"GET"}}const te=["camel","kebab","snake","pascal"];class ee extends xt{constructor(){super(...arguments),this.name="z-signals",this.priority=80}activate(t,e){const n=Array.from(t.attributes);let s=!1;for(const r of n)if("z-signals"!==r.name){if(r.name.startsWith("z-signals-")){const t=Y(r.name.slice(10),!0),e=et(t.name,t.modifiers,"camel");this.processSignal(e,r.value),s=!0}}else this.processSignalsObject(r.value),s=!0;s&&this.markActivated(t)}processSignalsObject(t){try{const e=w(t);e&&"object"==typeof e&&!Array.isArray(e)?jt.patch(e):void 0!==e&&jt.set("z-signals",e)}catch(e){}}processSignal(t,e){try{if(""===e)jt.set(t,"");else{const n=w(e);jt.set(t,n)}}catch(n){}}}class ne{constructor(t,e=0){this.deps=new Set,this.cleanups=[],this.fn=t,this.priority=e,this.run()}addDependency(t){this.deps.add(t)}run(){for(const e of this.deps)e.unsubscribe(this);this.deps.clear();for(const e of this.cleanups)e();this.cleanups=[];const t=h(this);try{const t=this.fn();"function"==typeof t&&this.cleanups.push(t)}finally{h(t)}for(const e of this.deps)e.subscribe(this)}dispose(){for(const t of this.deps)t.unsubscribe(this);this.deps.clear();for(const t of this.cleanups)t();this.cleanups=[]}}class se extends xt{constructor(){super(...arguments),this.name="z-bind",this.priority=20,this.effects=st()}activate(t,e){if(!(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement||t instanceof HTMLSelectElement))return;const{baseValue:n,entries:s}=it(t,"z-bind",D);let r=!1;n&&this.bindElement(t,n)&&(r=!0);for(const i of s)this.bindElement(t,i.name)&&(r=!0);r&&this.markActivated(t)}deactivate(t){this.effects.cleanup(t)}bindElement(t,e){return this.effects.run(t,()=>{let n=!1;const s=()=>{n||(t instanceof HTMLInputElement?"checkbox"===t.type?jt.set(e,t.checked):"radio"===t.type?t.checked&&jt.set(e,t.value):jt.set(e,t.value):jt.set(e,t.value))},r=nt(()=>{const s=jt.get(e);n=!0;try{if(t instanceof HTMLInputElement)if("checkbox"===t.type)t.checked=!!s;else if("radio"===t.type)t.checked=t.value===s+"";else{const e=(null!=s?s:"")+"";t.value!==e&&(t.value=e)}else{const e=(null!=s?s:"")+"";t.value!==e&&(t.value=e)}}finally{n=!1}});return t.addEventListener("input",s),t.addEventListener("change",s),{dispose(){r.dispose(),t.removeEventListener("input",s),t.removeEventListener("change",s)}}})}}class re extends xt{constructor(){super(...arguments),this.effects=st()}activate(t,e){const n=this.name+".lazy",s=t.getAttribute(n)||t.getAttribute(this.name);if(!s)return;const r=t.hasAttribute(n);this.effects.run(t,()=>nt(()=>{try{const e=m(t),n=w(s,e);if(r&&!this.hasExecuted(t))return void this.markExecuted(t);this.setContent(t,n)}catch(e){}}))&&(this.markActivated(t),r&&this.markExecuted(t))}deactivate(t){this.effects.cleanup(t);const e=t.i||{};e[this.name]&&delete e[this.name].executed}hasExecuted(t){var e;return!!(null===(e=(t.i||{})[this.name])||void 0===e?void 0:e.executed)}markExecuted(t){const e=t.i||{};e[this.name]||(e[this.name]={}),e[this.name].executed=!0,t.i=e}}class ie extends re{constructor(){super(...arguments),this.name="z-text",this.priority=30}setContent(t,e){t.textContent=((t,e={})=>{const{pretty:n=!1}=e;if(null==t)return"";if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t+"";if("function"==typeof t)return t.name||"[Function]";if(t instanceof Date)return t.toISOString();if("object"==typeof t)try{return n?JSON.stringify(t,null,2):JSON.stringify(t)}catch(s){return"[Object]"}return t+""})(e)}}class oe extends xt{constructor(){super(...arguments),this.name="z-computed",this.priority=15}activate(t,e){const{baseValue:n,entries:s}=it(t,"z-computed",D);n&&this.processInlineAssignments(n);for(const r of s)this.processComputed(r.name,r.value);(n||s.length>0)&&this.markActivated(t)}processInlineAssignments(t){const e=this.parseAssignments(t);for(const{name:n,expr:s}of e)this.processComputed(n,s)}parseAssignments(t){const e=[],n=t.split(";").map(t=>t.trim()).filter(t=>t);for(const s of n){const t=s.match(oe.ASSIGNMENT_PATTERN);if(t){const[,n,s]=t;e.push({name:n,expr:s})}}return e}processComputed(t,e){try{jt.createComputed(t,()=>w(e))}catch(n){}}}oe.ASSIGNMENT_PATTERN=/^\s*(\w+)\s*=\s*(.+)$/;class ce extends xt{constructor(){super(...arguments),this.name="z-show",this.priority=40,this.effects=st()}activate(t,e){const n=t.getAttribute("z-show");n&&this.effects.run(t,()=>nt(()=>{try{const e=m(t),s=w(n,e);t instanceof HTMLElement&&(t.style.display=s?"":"none")}catch(e){}}))&&this.markActivated(t)}deactivate(t){this.effects.cleanup(t)}}class ae extends xt{constructor(){super(...arguments),this.name="z-class",this.priority=50,this.effects=st()}activate(t,e){const{baseValue:n,entries:s,modifiers:r}=rt(t,"z-class");if(!n&&0===s.length)return;const i=r.includes("lazy");this.effects.run(t,()=>{const e=[];if(n){const s=this.processClassObject(t,n,i);s&&e.push(s)}for(const n of s){const s=et(n.name,n.modifiers),r=i||n.modifiers.includes("lazy"),o=this.processClassToggle(t,s,n.value,r);o&&e.push(o)}return e})&&this.markActivated(t)}deactivate(t){this.effects.cleanup(t)}processClassObject(t,e,n){const s=new Set;return nt(()=>{try{const r=w(e);if(n&&!this.hasExecuted(t))return void this.markExecuted(t);const i=new Set;if(r&&"object"==typeof r&&!Array.isArray(r))for(const[e,n]of Object.entries(r))i.add(e),t.classList.toggle(e,!!n);for(const e of s)i.has(e)||t.classList.remove(e);s.clear(),i.forEach(t=>s.add(t))}catch(r){}})}processClassToggle(t,e,n,s){return nt(()=>{try{const r=w(n);if(s&&!this.hasExecuted(t))return void this.markExecuted(t);t.classList.toggle(e,!!r)}catch(r){}})}hasExecuted(t){var e;return!!(null===(e=(t.i||{})[this.name])||void 0===e?void 0:e.executed)}markExecuted(t){const e=t.i||{};e[this.name]||(e[this.name]={}),e[this.name].executed=!0,t.i=e}}class ue extends xt{constructor(){super(...arguments),this.name="z-style",this.priority=55,this.effects=st(),this.originalStyles=new WeakMap}activate(t,e){const{baseValue:n,entries:s,modifiers:r}=rt(t,"z-style");if(!n&&0===s.length)return;const i=r.includes("lazy");this.effects.run(t,()=>{const e=[];if(n){const s=this.processStyleObject(t,n,i);s&&e.push(s)}for(const n of s){const s=et(n.name,n.modifiers),r=i||n.modifiers.includes("lazy"),o=this.processStyle(t,s,n.value,r);o&&e.push(o)}return e})&&this.markActivated(t)}deactivate(t){this.effects.cleanup(t);const e=this.originalStyles.get(t);if(e){for(const n of e.keys())this.restoreOriginalStyle(t,n);this.originalStyles.delete(t)}}processStyleObject(t,e,n){const s=new Set;return nt(()=>{try{const r=w(e);if(n&&!this.hasExecuted(t))return void this.markExecuted(t);const i=new Set;if(r&&"object"==typeof r&&!Array.isArray(r))for(const[e,n]of Object.entries(r)){const s=ot(e);i.add(s),this.setStyle(t,e,n)}for(const e of s)i.has(e)||this.restoreOriginalStyle(t,e);s.clear(),i.forEach(t=>s.add(t))}catch(r){}})}processStyle(t,e,n,s){return nt(()=>{try{const r=w(n);if(s&&!this.hasExecuted(t))return void this.markExecuted(t);this.setStyle(t,e,r)}catch(r){}})}setStyle(t,e,n){const s=ot(e),r=this.getCssPropertyName(e);this.captureOriginalStyle(t,s,r),ct(n)?t.style.setProperty(r,"string"==typeof n?n:n+""):this.restoreOriginalStyle(t,s)}captureOriginalStyle(t,e,n){var s;let r=this.originalStyles.get(t);if(r||(r=new Map,this.originalStyles.set(t,r)),r.has(e))return;const i=t,o=null!==(s=i.getAttribute("style"))&&void 0!==s?s:"",c=RegExp(`(^|;)\\s*${this.escapeForRegExp(n)}\\s*:`).test(o);r.set(e,c?i.style.getPropertyValue(n):null)}restoreOriginalStyle(t,e){const n=this.originalStyles.get(t),s=this.getCssPropertyName(e),r=t;if(!n||!n.has(e))return void r.style.removeProperty(s);const i=n.get(e);null!=i?r.style.setProperty(s,i):r.style.removeProperty(s)}getCssPropertyName(t){return t.startsWith("--")?t:t.includes("-")?t.toLowerCase():t.replace(ue.CAMEL_TO_KEBAB_PATTERN,"-$1").toLowerCase()}escapeForRegExp(t){return t.replace(ue.REGEXP_ESCAPE_PATTERN,"\\$&")}hasExecuted(t){var e;return!!(null===(e=(t.i||{})[this.name])||void 0===e?void 0:e.executed)}markExecuted(t){const e=t.i||{};e[this.name]||(e[this.name]={}),e[this.name].executed=!0,t.i=e}}ue.CAMEL_TO_KEBAB_PATTERN=/([A-Z])/g,ue.REGEXP_ESCAPE_PATTERN=/[.*+?^${}()|[\]\\]/g;class le extends xt{constructor(){super(...arguments),this.name="z-attr",this.priority=60,this.effects=st()}activate(t,e){const{baseValue:n,entries:s,modifiers:r}=rt(t,"z-attr");if(!n&&0===s.length)return;const i=r.includes("lazy");this.effects.run(t,()=>{const e=[];if(n){const s=this.processAttrObject(t,n,i);s&&e.push(s)}for(const n of s){const s=et(n.name,n.modifiers),r=i||n.modifiers.includes("lazy"),o=this.processAttr(t,s,n.value,r);o&&e.push(o)}return e})&&this.markActivated(t)}deactivate(t){this.effects.cleanup(t)}processAttrObject(t,e,n){const s=new Set;return nt(()=>{try{const r=w(e);if(n&&!this.hasExecuted(t))return void this.markExecuted(t);const i=new Set;if(r&&"object"==typeof r&&!Array.isArray(r))for(const[e,n]of Object.entries(r))i.add(e),this.setAttr(t,e,n);for(const e of s)i.has(e)||t.removeAttribute(e);s.clear(),i.forEach(t=>s.add(t))}catch(r){}})}processAttr(t,e,n,s){return nt(()=>{try{const r=w(n);if(s&&!this.hasExecuted(t))return void this.markExecuted(t);this.setAttr(t,e,r)}catch(r){}})}setAttr(t,e,n){const s=(t=>{if(null==t||!1===t)return null;if(!0===t)return"";if("object"==typeof t)try{return JSON.stringify(t)}catch(e){return"[Object]"}return t+""})(n);null===s?t.removeAttribute(e):t.setAttribute(e,s)}hasExecuted(t){var e;return!!(null===(e=(t.i||{})[this.name])||void 0===e?void 0:e.executed)}markExecuted(t){const e=t.i||{};e[this.name]||(e[this.name]={}),e[this.name].executed=!0,t.i=e}}const fe={prevent:t=>t.preventDefault(),stop:t=>t.stopPropagation(),self:(t,e)=>t.target===e||!1,ctrl:t=>t.ctrlKey||!1,control:t=>t.ctrlKey||!1,shift:t=>t.shiftKey||!1,alt:t=>t.altKey||!1,meta:t=>t.metaKey||!1,enter:t=>"Enter"===t.key||!1,tab:t=>"Tab"===t.key||!1,delete(t){const e=t.key;return"Delete"===e||"Backspace"===e||!1},esc:t=>"Escape"===t.key||!1,escape:t=>"Escape"===t.key||!1,space:t=>" "===t.key||!1,up:t=>"ArrowUp"===t.key||!1,down:t=>"ArrowDown"===t.key||!1,left:t=>t instanceof KeyboardEvent?"ArrowLeft"===t.key||!1:t instanceof MouseEvent&&0===t.button||!1,right:t=>t instanceof KeyboardEvent?"ArrowRight"===t.key||!1:t instanceof MouseEvent&&2===t.button||!1,middle:t=>t instanceof MouseEvent&&1===t.button||!1,capture(){},once(){},passive(){},viewtransition(){}};class he extends xt{constructor(){super(...arguments),this.name="z-on",this.priority=70,this.listeners=new WeakMap,this.resizeObservers=new WeakMap}activate(t,e){var n,s;const r=this.resolveAttributes(t);if(0===r.length)return;const i=this.listeners.get(t);i&&this.removeListeners(t,i);const o=this.resizeObservers.get(t);o&&(o.disconnect(),this.resizeObservers.delete(t));const c=[];for(const{event:a,statement:u,modifiers:l}of r){if("resize"===a){this.setupResizeHandler(t,u,e,l);continue}const r=this.createHandler(u,t,e,l),i=this.getEventListenerOptions(l);if(null!==(n=null==l?void 0:l.includes("window"))&&void 0!==n&&n)window.addEventListener(a,r,i),c.push({event:a,handler:r,target:window});else{if(null!==(s=null==l?void 0:l.includes("outside"))&&void 0!==s&&s){const e=e=>{t.contains(e.target)||r(e)};document.addEventListener(a,e,i),c.push({event:a,handler:e,target:document});continue}t.addEventListener(a,r,i),c.push({event:a,handler:r,target:t})}}this.listeners.set(t,c),(c.length>0||this.resizeObservers.has(t))&&this.markActivated(t)}deactivate(t){const e=this.listeners.get(t);e&&(this.removeListeners(t,e),this.listeners.delete(t));const n=this.resizeObservers.get(t);n&&(n.disconnect(),this.resizeObservers.delete(t)),b(t)}createHandler(t,e,n,s){return async n=>{var r;try{if(s&&s.length>0&&!this.applyModifiers(n,s,e))return;const i=null!==(r=null==s?void 0:s.some(t=>"viewtransition"===t))&&void 0!==r&&r;if(s&&s.length>0){const r=(t=>Nt.parseDelayModifiers(t))(s);if(r.delay||r.debounce||r.throttle){const s=await(async(t,e,n,s)=>Rt.executeWithDelay({element:t,statement:e,execute:n},s))(e,t,async()=>{await this.executeStatementWithViewTransition(t,n,e,i)},r);if(s.wait){if(!await s.wait)return}else s.executeNow&&await this.executeStatementWithViewTransition(t,n,e,i)}else await this.executeStatementWithViewTransition(t,n,e,i)}else await this.executeStatementWithViewTransition(t,n,e,i)}catch(i){}}}async executeStatementWithViewTransition(t,e,n,s){const r=()=>{const s=t.trim();if(he.SIMPLE_FUNCTION_PATTERN.test(s)){const t=window[s];if("function"==typeof t){const s=window.$z;return t.call(n,s,e)}}const r=m(n);y(t,{...r,event:e,$event:e,target:e.target,currentTarget:e.currentTarget})};s&&document.startViewTransition?document.startViewTransition(async()=>{await this.withEventSignals(e,r)}):await this.withEventSignals(e,r)}setupResizeHandler(t,e,n,s){const r=this.createHandler(e,t,n,s),i=new ResizeObserver(t=>{for(const e of t){const t=new Event("resize",{bubbles:!1});Object.defineProperty(t,"target",{value:e.target,enumerable:!0}),Object.defineProperty(t,"currentTarget",{value:e.target,enumerable:!0}),Object.defineProperty(t,"contentRect",{value:e.contentRect,enumerable:!0}),r(t)}});i.observe(t),this.resizeObservers.set(t,i)}async withEventSignals(t,e){var n,s;const r=[["event",t],["target",null!==(n=t.target)&&void 0!==n?n:null],["currentTarget",null!==(s=t.currentTarget)&&void 0!==s?s:null]],i=new Map;for(const[o,c]of r){const t=jt.has(o),e=t?jt.get(o):void 0;i.set(o,{existed:t,value:e}),jt.set(o,c)}try{return await e()}finally{for(const[t,e]of i.entries())e.existed?jt.set(t,e.value):jt.delete(t)}}removeListeners(t,e){for(const{event:n,handler:s,target:r}of e)(r||t).removeEventListener(n,s)}resolveAttributes(t){const e=Array.from(t.attributes),n=[];for(const s of e){if(s.name.startsWith("z-on-")){const t=s.name.slice(5),{eventName:e,modifiers:r}=this.parseEventWithModifiers(t),i=this.resolveEventName(e);n.push({event:i,statement:s.value,modifiers:r});continue}he.SUPPORTED_ALIAS_ATTRIBUTES.includes(s.name)&&n.push({event:s.name,statement:s.value})}return n}parseEventWithModifiers(t){const e=Y(t,!1);return{eventName:et(e.name,e.modifiers),modifiers:e.modifiers.filter(t=>!te.includes(t))}}resolveEventName(t){if(t.toLowerCase().startsWith("z-"))return t.toLowerCase();const e=t.toLowerCase(),n=he.EVENT_ALIASES[e];return null!=n?n:t}getEventListenerOptions(t){if(!t||0===t.length)return!1;const e={};return t.includes("capture")&&(e.capture=!0),t.includes("once")&&(e.once=!0),t.includes("passive")&&(e.passive=!0),Object.keys(e).length>0&&e}applyModifiers(t,e,n){for(const s of e){const e=fe[s];if(e&&!1===e(t,n))return!1}return!0}}he.REQ_EVENT_ALIASES=["before","after","error","finally"],he.EVENT_ALIASES=(()=>{const t={};for(const e of he.REQ_EVENT_ALIASES)t[e]="z-"+e;return t})(),he.SUPPORTED_ALIAS_ATTRIBUTES=he.REQ_EVENT_ALIASES.map(t=>"z-"+t),he.SIMPLE_FUNCTION_PATTERN=/^[a-zA-Z_$][\w$]*$/;class de extends xt{constructor(){super(...arguments),this.name="z-indicator",this.priority=15,this.listeners=new WeakMap}activate(t,e){const{baseValue:n,entries:s}=it(t,"z-indicator",D),r=[];null!==n&&r.push(n||"loading");for(const i of s)r.push(i.name);if(r.length){for(const t of r)jt.has(t)||jt.set(t,!1);this.setupRequestListeners(t,r),this.markActivated(t)}}deactivate(t){const e=this.listeners.get(t);e&&(t.removeEventListener("z-before",e.before),t.removeEventListener("z-after",e.after),t.removeEventListener("z-error",e.error),this.listeners.delete(t))}setupRequestListeners(t,e){const n=()=>{e.forEach(t=>{jt.set(t,!0)})},s=()=>{e.forEach(t=>{jt.set(t,!1)})};this.listeners.set(t,{before:n,after:s,error:s}),t.addEventListener("z-before",n),t.addEventListener("z-after",s),t.addEventListener("z-error",s)}}class pe extends xt{constructor(){super(...arguments),this.name="z-ignore",this.priority=1e3}activate(t,n){if(!t.hasAttribute("z-ignore"))return;const s=t.getAttribute("z-ignore")||"",r="self"===s||".self"===s||s.includes(".self");e(t).ignored=!0,r||this.markDescendantsIgnored(t),this.markActivated(t)}markDescendantsIgnored(t){t.querySelectorAll("*").forEach(t=>{e(t).ignored=!0})}static shouldIgnore(t){return!!e(t).ignored}}class me extends xt{constructor(){super(...arguments),this.name="z-effect",this.priority=20,this.effects=st(),this.recursionDepth=new WeakMap,this.pendingResets=new WeakMap}activate(t,e){const n=t.getAttribute("z-effect"),s=null==n?void 0:n.trim();s&&this.effects.run(t,()=>{const e=this.createEffectWithGuard(t,s);return e?[e]:[]})&&this.markActivated(t)}deactivate(t){this.effects.cleanup(t),this.recursionDepth.delete(t),this.pendingResets.delete(t)}createEffectWithGuard(t,e){return nt(()=>{var n;const s=null!==(n=this.recursionDepth.get(t))&&void 0!==n?n:0;if(me.MAX_RECURSION>s){this.recursionDepth.set(t,s+1);try{y(e)}catch(r){}finally{const e=Symbol();this.pendingResets.set(t,e),queueMicrotask(()=>{setTimeout(()=>{this.pendingResets.get(t)===e&&this.recursionDepth.has(t)&&(this.recursionDepth.set(t,0),this.pendingResets.delete(t))},0)})}}else this.pendingResets.delete(t)})}}me.MAX_RECURSION=100;const we="undefined"!=typeof WeakRef;class ye{constructor(){var t;this.refs=new Map,this.cleanupRegistry=(t=t=>{this.refs.delete(t),jt.set(t,null)},"undefined"==typeof FinalizationRegistry?null:new FinalizationRegistry(e=>{t(e)}))}set(t,e){var n;if(this.resolveRef(t),we){const s=new WeakRef(e);this.refs.set(t,s),null===(n=this.cleanupRegistry)||void 0===n||n.register(e,t)}else this.refs.set(t,e);jt.set(t,e)}get(t){return this.resolveRef(t)}delete(t){this.refs.delete(t),jt.set(t,null)}has(t){return null!==this.resolveRef(t)}resolveRef(t){const e=this.refs.get(t);return e?we&&e instanceof WeakRef?e.deref()||(this.refs.delete(t),null):e:null}}const ve=new ye,ge=/^[A-Za-z_$][\w$-]*$/;class be extends xt{constructor(){super(...arguments),this.name="z-ref",this.priority=100,this.refStore=at(),this.elementRefs=new WeakMap}activate(t,e){if(!((t,e)=>{const n=e+"-";return Array.from(t.attributes).some(t=>t.name===e||t.name.startsWith(n))})(t,"z-ref"))return;const{baseValue:n,entries:s,modifiers:r}=rt(t,"z-ref"),i=new Set;if(n){const e=this.normalizeRefName(n,r);e&&(this.createRef(e,t),i.add(e))}for(const o of s){const e=this.normalizeRefName(o.value?o.value:o.name,o.modifiers);e&&!i.has(e)&&(this.createRef(e,t),i.add(e))}i.size>0&&(this.elementRefs.set(t,i),this.markActivated(t))}deactivate(t){const e=this.elementRefs.get(t);if(e){for(const n of e)this.cleanupRef(n,t);this.elementRefs.delete(t)}}createRef(t,e){this.refStore.set(t,e)}cleanupRef(t,e){this.refStore.get(t)===e&&this.refStore.delete(t)}normalizeRefName(t,e=[]){if(!t)return null;const n=t.trim();if(!n)return null;const s=et(n,e,"camel");return ge.test(s)?s:null}}class ze extends xt{constructor(){super(...arguments),this.name="z-load",this.priority=90,this.executed=new WeakSet,this.lastExpressions=new WeakMap}activate(t,n){const s=t.getAttribute("z-load"),r=null==s?void 0:s.trim();if(!r)return;this.executeOnce(t,r);const i=new MutationObserver(()=>{var e;const n=t.getAttribute("z-load"),s=null!==(e=null==n?void 0:n.trim())&&void 0!==e?e:"";if(!s)return this.executed.delete(t),void this.lastExpressions.delete(t);this.lastExpressions.get(t)!==s&&this.executeOnce(t,s)});i.observe(t,{attributes:!0,attributeFilter:["z-load"]});const o=e(t);o.onLoadObserver&&o.onLoadObserver.disconnect(),o.onLoadObserver=i,this.markActivated(t)}deactivate(t){const n=e(t);n.onLoadObserver&&(n.onLoadObserver.disconnect(),delete n.onLoadObserver),this.executed.delete(t),this.lastExpressions.delete(t)}executeOnce(t,e){const n=this.lastExpressions.get(t);if(!this.executed.has(t)||n!==e)try{y(e)}catch(s){}finally{this.executed.add(t),this.lastExpressions.set(t,e)}}}const xe=/<script[^>]*>.*?<\/script>/gis,Ee=/on\w+\s*=\s*["'][^"']*["']/gi,Me=/href\s*=\s*["']javascript:[^"']*["']/gi;class Se extends re{constructor(){super(...arguments),this.name="z-html",this.priority=35}setContent(t,e){const n=(null!=e?e:"")+"";if(t.hasAttribute("z-html.unsafe"))t.innerHTML=n;else{const e=ut(n);t.innerHTML=e}}}class Te extends xt{constructor(){super(...arguments),this.name="z-for",this.priority=5,this.effects=st(),this.itemsMap=new WeakMap,this.templatesMap=new WeakMap}activate(t,e){if("TEMPLATE"!==t.tagName)return;const n=t.getAttribute("z-for");if(!n)return;const s=this.parseForExpression(n);if(!s)return;const r=t,i=r.parentElement;if(!i)return;const o=r.content.firstElementChild;if(!o)return;this.templatesMap.set(t,o.cloneNode(!0));const c=document.createComment("z-for");i.insertBefore(c,r);const a=t.getAttribute("z-key");this.effects.run(t,()=>nt(()=>{try{const n=w(s.arrayExpression,{element:t});this.renderList(t,c,n,s,a,e)}catch(n){}}))&&this.markActivated(t)}deactivate(t){this.effects.cleanup(t);const e=this.itemsMap.get(t);e&&(e.forEach(t=>this.cleanupElement(t.element)),this.itemsMap.delete(t)),this.templatesMap.delete(t)}renderList(t,e,n,s,r,i){Array.isArray(n)||(n=[]);const o=e.parentElement;if(!o)return;const c=this.itemsMap.get(t)||[],a=this.templatesMap.get(t);if(!a)return;const u=new Map;c.forEach(t=>u.set(t.key,t));const l=document.createDocumentFragment(),f=[],h=[];n.forEach((t,e)=>{const n=r?this.evaluateKey(r,t,e,s):e;let i=u.get(n);if(i)u.delete(n),this.updateLoopContext(i.element,t,e,s);else{const r=a.cloneNode(!0);this.injectLoopContext(r,t,e,s),l.appendChild(r),h.push({element:r,context:this.createLoopContext(t,e,s)}),i={element:r,key:n}}f.push(i)}),l.hasChildNodes()&&(o.insertBefore(l,e.nextSibling),this.batchActivate(h,i)),u.forEach(t=>{this.cleanupElement(t.element),t.element.parentElement&&t.element.parentElement.removeChild(t.element)}),this.itemsMap.set(t,f)}batchActivate(t,e){t.forEach(({element:t,context:e})=>{p(t,e),this.setLoopContextRecursive(t,e)});const n=[];t.forEach(({element:t})=>{this.collectElements(t,n)}),n.forEach(t=>e.activate(t))}collectElements(t,e){e.push(t),Array.from(t.children).forEach(t=>{this.collectElements(t,e)})}evaluateKey(t,e,n,s){try{if(null==e)return n;const r={[s.itemName]:e,index:n};s.indexName&&"index"!==s.indexName&&(r[s.indexName]=n);const i=w(t,r);return null!=i?i:n}catch(r){return n}}createLoopContext(t,e,n){const s={[n.itemName]:t,index:e};return n.indexName&&"index"!==n.indexName&&(s[n.indexName]=e),s}injectLoopContext(t,e,n,s){const r={...m(t)||{}};r[s.itemName]=e,s.indexName&&(r[s.indexName]=n),p(t,r),this.setLoopContextRecursive(t,r)}updateLoopContext(t,e,n,s){const r=m(t)||{};r[s.itemName]=e,s.indexName&&(r[s.indexName]=n),p(t,r)}setLoopContextRecursive(t,e){p(t,e),Array.from(t.children).forEach(t=>{this.setLoopContextRecursive(t,e)})}cleanupElement(t){(t=>{Ot.delete(t)})(t),Array.from(t.children).forEach(t=>{this.cleanupElement(t)})}parseForExpression(t){const e=t.match(/^\s*(?:\(([^,)]+)(?:,\s*([^)]+))?\)|([^,\s]+)(?:,\s*([^\s]+))?)\s+in\s+(.+)\s*$/);if(!e)return null;const n=e[1]||e[3],s=e[2]||e[4],r=e[5];return n&&r?{itemName:n.trim(),indexName:null==s?void 0:s.trim(),arrayExpression:r.trim()}:null}}const Ae=/&/g,je=/</g,Oe=/>/g,ke=/"/g,Le=/'/g,Ne=/-([a-z])/g,Re=/([a-z])([A-Z])/g,$e=[pe,Te,Yt,ee,be,ze,de,se,ie,Se,oe,ce,ae,ue,le,he,me],De="__zSparkSignalsProxy";let Fe=null,He=null;const Pe={init(t){return He||(He=ft(t),He.init()),(()=>{if("undefined"==typeof window)return;const t=window,e=t.$z;e&&e[De]?Fe=e:(Fe=(()=>{const t={[De]:!0},e=new Proxy({},{get(t,e){if("string"!=typeof e)return;let n=ve.get(e);if(n)return n;const s=e.toLowerCase();return s!==e&&(n=ve.get(s),n)?n:null},has(t,e){return"string"==typeof e&&ve.has(e)},ownKeys(){return[]},getOwnPropertyDescriptor(){return{configurable:!0,enumerable:!1,writable:!1,value:void 0}}});return new Proxy(t,{get(t,n){return n===De||("$all"===n?()=>jt.getAll():"$refs"===n?e:n===Symbol.toStringTag?"ZviewSignals":n===Symbol.iterator?function*(){const t=Object.entries(jt.getAll());for(const e of t)yield e}:"string"==typeof n&&jt.has(n)?jt.get(n):void 0)},set(t,e,n){return"string"==typeof e&&e!==De&&(jt.set(e,n),!0)},deleteProperty(t,e){return"string"==typeof e&&e!==De&&(jt.has(e)&&jt.delete(e),!0)},has(t,e){return e===De||"$all"===e||"$refs"===e||"string"==typeof e&&jt.has(e)},ownKeys(){return Object.keys(jt.getAll())},getOwnPropertyDescriptor(t,n){return n===De?{configurable:!1,enumerable:!1,value:!0}:"$all"===n?{configurable:!0,enumerable:!1,value:()=>jt.getAll(),writable:!1}:"$refs"===n?{configurable:!0,enumerable:!1,value:e,writable:!1}:"string"==typeof n&&jt.has(n)?{configurable:!0,enumerable:!0,value:jt.get(n),writable:!0}:void 0}})})(),Object.defineProperty(t,"$z",{value:Fe,configurable:!0,enumerable:!1,writable:!1}))})(),He},activate(t){if(!He)throw Error("Zview must be initialized before calling activate");He.activate(t)},deactivate(t){if(!He)throw Error("Zview must be initialized before calling deactivate");He.deactivate(t)},register(t){if(!He)throw Error("Zview must be initialized before registering directives");He.register(t)},getEngine(){return He}};(()=>{var t;if("undefined"==typeof window||"undefined"==typeof document)return;window.Zview=Pe;const e=document.currentScript;if(!(null==e?void 0:e.hasAttribute("data-init")))return;let n=null;if(null===(t=null==e?void 0:e.dataset)||void 0===t?void 0:t.config)try{n=JSON.parse(e.dataset.config,(t,e)=>{if("__proto__"!==t&&"constructor"!==t&&"prototype"!==t)return e})}catch(r){}const s=()=>{Pe.init(null==n?void 0:n.setup),document.querySelectorAll("[z-block]").forEach(t=>t.removeAttribute("z-block"))};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",s):s()})(),t.ActionError=class extends wt{constructor(t,e,n,s){super(`[Action: ${e}] ${t}`,s),this.name="ActionError",this.commandName=e,this.element=n}},t.AttrDirective=le,t.BaseDirective=xt,t.BindDirective=se,t.ClassDirective=ae,t.CommandRegistry=mt,t.ComputedDirective=oe,t.ComputedSignal=Tt,t.ConfigManager=dt,t.DataCollector=Lt,t.DirectiveError=class extends wt{constructor(t,e,n,s){super(`[${e}] ${t}`,s),this.name="DirectiveError",this.directiveName=e,this.element=n}},t.DirectiveRegistry=pt,t.Effect=ne,t.EffectDirective=me,t.Engine=zt,t.ErrorHandler=vt,t.ForDirective=Te,t.GlobalRefStore=ye,t.HtmlDirective=Se,t.IgnoreDirective=pe,t.IndicatorDirective=de,t.LoadDirective=ze,t.OnDirective=he,t.RefDirective=be,t.ReqDirective=Yt,t.RequestError=yt,t.RequestManager=Xt,t.Scheduler=Et,t.ScriptProcessor=Vt,t.ShowDirective=ce,t.Signal=Mt,t.SignalsDirective=ee,t.StyleDirective=ue,t.SwapManager=Bt,t.TargetFinder=Zt,t.TextDirective=ie,t.Zview=Pe,t.ZviewError=wt,t.attr=c,t.builtinDirectives=$e,t.camelCase=t=>t.replace(Ne,(t,e)=>e.toUpperCase()),t.camelToKebab=t=>t.replace(Ut,t=>"-"+t.toLowerCase()),t.cleanupPolling=U,t.clearInternalData=n,t.computed=d,t.createEngine=ft,t.createHistoryFeature=Z,t.createJsonResponseFeature=P,t.createPollingFeature=q,t.createRedirectFeature=V,t.createRefStore=at,t.createRequestDataFeature=$,t.createRequestManager=(t,e=X())=>new Xt(t,{features:e}),t.createSwapFeature=I,t.default=Pe,t.dispatchCustomEvent=r,t.effect=nt,t.elId=t=>{const n=e(t);return n.o||(n.o="el-"+ ++bt),n.o},t.escapeHtml=t=>t.replace(Ae,"&amp;").replace(je,"&lt;").replace(Oe,"&gt;").replace(ke,"&quot;").replace(Le,"&#39;"),t.evaluateExpression=w,t.evaluateStatement=y,t.executeSwap=C,t.getAttrCrumbs=u,t.getFormatConfig=O,t.getHeadersConfig=R,t.getInternalData=e,t.getIntervalConfig=L,t.getMethodConfig=k,t.getRequestManager=Q,t.getSelectorConfig=j,t.getTimeoutConfig=N,t.globalRefStore=ve,t.globalStore=jt,t.hasAttr=a,t.isValidStyleValue=ct,t.kebabCase=t=>t.replace(Re,"$1-$2").toLowerCase(),t.kebabToCamel=D,t.kebabToPascal=H,t.kebabToSnake=F,t.listen=i,t.mergeParams=g,t.normalizeStyleName=ot,t.parseData=v,t.parseElementConfig=A,t.parseTime=t=>{const e=parseFloat(t);return t.endsWith("ms")?e:t.endsWith("s")?1e3*e:t.endsWith("m")?6e4*e:e},t.querySelector=s,t.querySelectorAll=(t,e=document)=>Array.from(e.querySelectorAll(t)),t.registerDefaultDirectives=lt,t.sanitizeHtml=ut,t.serializeFormData=t=>{const e=new URLSearchParams;return t.forEach((t,n)=>{e.append(n,""+t)}),""+e},t.setInternalData=(t,e)=>{gt.set(t,e)},t.shouldPreventDefault=o,t.splitTrim=(t,e)=>t.split(e).map(t=>t.trim()).filter(t=>t.length>0),t.trim=t=>t.trim(),t.unescapeHtml=t=>{const e=document.createElement("div");return e.innerHTML=t,e.textContent||""},t.unlisten=(t,n,s)=>{const r=e(t);r.listeners&&(n&&s?(t.removeEventListener(n,s),r.listeners=r.listeners.filter(t=>t.event!==n||t.handler!==s)):n?(r.listeners.filter(t=>t.event===n).forEach(e=>t.removeEventListener(e.event,e.handler)),r.listeners=r.listeners.filter(t=>t.event!==n)):(r.listeners.forEach(e=>t.removeEventListener(e.event,e.handler)),r.listeners=[]))},t.xhr=l,Object.defineProperty(t,"u",{value:!0})},"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).Zview={});
